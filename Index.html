<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Nyeila âœ¨ðŸŽ€</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Sacramento&display=swap" rel="stylesheet">
<style>
  :root{
    --pink:#ff87b7; --lav:#a48bff; --mint:#74e3c5; --sun:#ffd166; --ink:#3b3150;
    --card-bg: rgba(255,255,255,0.86);
    --polaroid: #fff6fb;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;}
  body{
    font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;
    background: radial-gradient(800px 600px at 10% 10%, #fff0f6 0%, transparent 30%),
                radial-gradient(900px 700px at 90% 30%, #e6f7ff 0%, transparent 30%),
                linear-gradient(180deg,#fff 0%, #fffde6 100%);
    display:flex; align-items:center; justify-content:center; padding:24px; color:var(--ink);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  /* Stage card */
  .stage{
    width:min(980px,98vw);
    background:var(--card-bg);
    border-radius:28px;
    padding:26px;
    box-shadow:0 18px 60px rgba(59,49,80,0.08);
    position:relative;
    overflow:hidden;
  }
  header{ text-align:center; margin-bottom:6px }
  h1{
    font-size:clamp(20px,3.2vw,40px);
    margin:6px 0 0;
    font-weight:800;
    line-height:1;
    background:linear-gradient(90deg,var(--pink),var(--lav),var(--mint),var(--sun));
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .subtitle{ color:rgba(59,49,80,0.7); font-size:14px; margin-top:6px }

  /* floating decorations (hearts & stars) */
  .decor{ position:absolute; inset:0; pointer-events:none; z-index:1 }
  .decor .floating{
    position:absolute; width:22px; height:22px; opacity:.16; transform:translateY(100vh);
    filter:drop-shadow(0 6px 12px rgba(0,0,0,0.08));
  }
  /* center area */
  .center{ display:flex; gap:28px; align-items:flex-start; justify-content:center; padding:18px 8px; z-index:2; position:relative; flex-wrap:wrap;}
  .left{
    width:280px; display:flex; flex-direction:column; align-items:center; gap:12px;
  }
  .balloon-wrap{ width:260px; height:260px; display:grid; place-items:center; position:relative }
  .balloon{
    width:170px; height:215px; border-radius:50% 50% 42% 58% / 60% 60% 40% 40%;
    background: linear-gradient(180deg,#fff6ff 0%, #ffbfe6 25%, #ff87b7 55%, #a48bff 100%);
    box-shadow: 0 20px 50px rgba(164,139,255,0.12), inset -12px -18px 40px rgba(255,255,255,0.45);
    transform:scale(0); transition:transform 900ms cubic-bezier(.2,.9,.3,1);
    display:grid; place-items:center;
  }
  .balloon::after{ content:''; position:absolute; left:50%; bottom:-48px; width:2px; height:78px; background:linear-gradient(180deg,#e8c, #b59); transform:translateX(-50%); border-radius:2px; }
  .shine{ position:absolute; width:120px; height:120px; border-radius:50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.05)); top:18px; left:22px; mix-blend-mode:screen; pointer-events:none; opacity:.9 }

  .control{
    display:flex; gap:12px; flex-direction:column; align-items:center;
  }
  .btn{
    border:0; padding:12px 18px; border-radius:999px; cursor:pointer; font-weight:800;
    background:linear-gradient(90deg,var(--pink),var(--lav)); color:#fff; box-shadow:0 12px 30px rgba(164,139,255,0.12);
    transition:transform .14s ease, box-shadow .14s ease;
  }
  .btn:active{ transform:translateY(2px) }

  /* right gallery area */
  .right{
    width:calc(100% - 320px); max-width:520px; min-width:260px; display:flex; flex-direction:column; gap:12px; align-items:center;
  }
  .gallery{
    display:flex; gap:12px; flex-wrap:wrap; justify-content:center; padding:6px;
    perspective:900px;
  }
  .polaroid{
    width:150px; height:180px; background:var(--polaroid); border-radius:14px; padding:10px;
    border:6px solid rgba(255,238,246,0.9);
    box-shadow:0 12px 30px rgba(59,49,80,0.08);
    transform: translateY(22px) scale(.92) rotate(-6deg); opacity:0;
    display:flex; flex-direction:column; align-items:center; justify-content:flex-start; overflow:hidden;
  }
  .polaroid img{ width:100%; height:122px; object-fit:cover; border-radius:10px; display:block }
  .label{ margin-top:8px; font-size:13px; color:rgba(59,49,80,0.8); font-weight:600; font-family: 'Sacramento', cursive; letter-spacing:.2px }

  .wish{
    min-height:54px; font-size:1.05rem; font-weight:700; text-align:center;
    background:linear-gradient(90deg,var(--pink),var(--lav),var(--mint));
    -webkit-background-clip:text; background-clip:text; color:transparent; opacity:0; text-shadow:0 8px 30px rgba(255,135,183,0.12);
  }

  /* flash + smoke overlay */
  .flash{ position:absolute; inset:0; background:radial-gradient(circle at center, rgba(255,255,255,0.9), rgba(255,235,245,0.4)); opacity:0; pointer-events:none; z-index:3; transition:opacity .18s ease }
  .smoke{ position:absolute; width:420px; height:180px; filter: blur(18px); opacity:0; left:50%; transform:translateX(-50%); top:18%; background:radial-gradient(closest-side, rgba(250,230,255,0.85), rgba(255,250,240,0.2)); border-radius:50%; z-index:2; transition:opacity .6s ease, transform .9s ease }

  /* responsive */
  @media (max-width:880px){
    .center{flex-direction:column; align-items:center}
    .left{width:100%}
    .right{width:100%; max-width:720px}
    .polaroid{width:120px;height:150px}
    .balloon{width:140px;height:178px}
  }

  /* small helpers for float animation applied inline via JS */
</style>
</head>
<body>
  <div class="stage" role="main" aria-label="Birthday card for Nyeila">
    <div class="decor" aria-hidden="true"></div>

    <header>
      <h1>Happy Birthday â€” <span style="font-family: 'Sacramento', cursive; font-size:1.05em">Nyeila</span> ðŸŽ€</h1>
      <div class="subtitle">Click the button and make a wish âœ¨</div>
    </header>

    <div class="center">
      <div class="left">
        <div class="balloon-wrap" aria-hidden="true">
          <div id="balloon" class="balloon" aria-hidden="true">
            <div class="shine"></div>
          </div>
          <div class="string" style="position:absolute;bottom:-46px;left:50%;width:2px;height:80px;background:linear-gradient(180deg,#eeb,#b59);transform:translateX(-50%);border-radius:2px"></div>
          <div class="smoke" id="smoke" aria-hidden="true"></div>
        </div>

        <div class="control">
          <button id="btn" class="btn" aria-pressed="false" aria-label="Blow and pop the balloon">ðŸŽˆ Blow & Pop the Balloon!</button>
          <small style="color:rgba(59,49,80,0.6);margin-top:6px">Tap anywhere if audio doesn't start</small>
        </div>
      </div>

      <div class="right">
        <div class="gallery" id="gallery" aria-live="polite">
          <div class="polaroid"><img src="https://files.catbox.moe/ftvano.jpg" alt="cute 1"><div class="label">Sweet smile</div></div>
          <div class="polaroid"><img src="https://files.catbox.moe/zg4zyy.jpg" alt="cute 2"><div class="label">Lovely day</div></div>
          <div class="polaroid"><img src="https://files.catbox.moe/qcsvlx.jpg" alt="cute 3"><div class="label">Dreamy</div></div>
          <div class="polaroid"><img src="https://files.catbox.moe/xeqvod.jpg" alt="cute 4"><div class="label">Sparkles</div></div>
        </div>

        <div id="wish" class="wish" aria-live="polite" aria-atomic="true"></div>
      </div>
    </div>

    <div class="flash" id="flash" aria-hidden="true"></div>

    <!-- particle canvases -->
    <canvas id="burstCanvas" style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:4"></canvas>
    <canvas id="glitterCanvas" style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:4"></canvas>
  </div>

  <!-- audio -->
  <audio id="bgm" src="https://files.catbox.moe/s971h0.mp3" loop preload="auto"></audio>

<script>
/* ============================
   Utilities & setup
   ============================ */
const rand = (a,b)=> a + Math.random()*(b-a);
const clamp = (v,a,b)=> Math.min(Math.max(v,a),b);

const decor = document.querySelector('.decor');
const spawnDecor = ()=>{ // floating hearts/stars
  const el = document.createElement('div');
  el.className='floating';
  el.style.left = (Math.random()*95)+'%';
  el.style.width = (10+Math.random()*22)+'px';
  el.style.height = el.style.width;
  const type = Math.random() < 0.6 ? 'heart' : 'star';
  if(type === 'heart'){
    el.style.background = 'linear-gradient(180deg,#ffb6d9,#ff87b7)';
    el.style.clipPath = 'polygon(50% 0%, 61% 14%, 75% 14%, 88% 25%, 88% 39%, 50% 100%, 12% 39%, 12% 25%, 25% 14%, 39% 14%)';
  } else {
    el.style.background = 'linear-gradient(180deg,#fff0c8,#ffd166)';
    el.style.clipPath = 'polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)';
  }
  el.style.opacity = 0.08 + Math.random()*0.12;
  el.style.transform = `translateY(${20 + Math.random()*10}vh)`;
  el.style.transition = `transform ${8 + Math.random()*8}s linear, opacity ${8 + Math.random()*8}s linear`;
  decor.appendChild(el);
  // animate
  requestAnimationFrame(()=> {
    el.style.transform = `translateY(-120vh) rotate(${(Math.random()-0.5)*720}deg)`;
    el.style.opacity = 0;
  });
  setTimeout(()=> el.remove(), (9000 + Math.random()*7000));
};
setInterval(spawnDecor, 1000);
for(let i=0;i<10;i++) setTimeout(spawnDecor, i*250);

/* ============================
   Canvas: burst (sparkles, hearts, stars)
   ============================ */
const burstCanvas = document.getElementById('burstCanvas');
const glitterCanvas = document.getElementById('glitterCanvas');
const burstCtx = burstCanvas.getContext('2d');
const glitterCtx = glitterCanvas.getContext('2d');

function fitCanvas(c){
  c.width = Math.floor(window.innerWidth * devicePixelRatio);
  c.height = Math.floor(window.innerHeight * devicePixelRatio);
  c.style.width = window.innerWidth + 'px';
  c.style.height = window.innerHeight + 'px';
  const ctx = c.getContext('2d'); ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
fitCanvas(burstCanvas); fitCanvas(glitterCanvas);
window.addEventListener('resize', ()=>{ fitCanvas(burstCanvas); fitCanvas(glitterCanvas); });

let particles = [], glitter = [];

/* particle factory */
function makeParticles(x,y){
  const parts = [];
  const palette = ['#ffb6d9','#ffd1e8','#a48bff','#c8d4ff','#74e3c5','#ffd166'];
  // sparkles (stars)
  for(let i=0;i<36;i++){
    const ang = rand(0,Math.PI*2); const sp = rand(2.4,7); const s = rand(3,8);
    parts.push({
      x,y,vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp - rand(1,4), life:0, ttl: 60 + Math.random()*40,
      type:'spark', s, col: palette[Math.floor(Math.random()*palette.length)], rot:Math.random()*Math.PI*2, drot: (Math.random()-0.5)*0.2
    });
  }
  // hearts/dots
  for(let i=0;i<60;i++){
    const ang = rand(0,Math.PI*2); const sp = rand(0.6,4); const r = rand(2,6);
    parts.push({
      x,y,vx:Math.cos(ang)*sp, vy:Math.sin(ang)*sp - rand(0.5,2), life:0, ttl: 90 + Math.random()*80,
      type: 'dot', r, col: palette[Math.floor(Math.random()*palette.length)]
    });
  }
  return parts;
}

/* glitter rain spawn */
function spawnGlitter(count){
  for(let i=0;i<count;i++){
    glitter.push({
      x: rand(0, window.innerWidth),
      y: -rand(0, 400),
      vx: rand(-0.6, 0.6),
      vy: rand(1.2, 3.4),
      r: rand(1.2, 4.2),
      col: ['#ffd1e8','#c8d4ff','#fff0c8','#c8fff0'][Math.floor(Math.random()*4)],
    });
  }
}

/* draw loops */
let lastTime = 0;
function frame(t){
  const dt = Math.min(40, t - lastTime);
  lastTime = t;
  // burst particles
  burstCtx.clearRect(0,0,burstCanvas.width, burstCanvas.height);
  for(let i=particles.length-1;i>=0;i--){
    const p = particles[i];
    p.life += dt/16;
    p.vy += 0.06 * (dt/16);
    p.x += p.vx * (dt/16);
    p.y += p.vy * (dt/16);
    if(p.type === 'spark'){
      burstCtx.save();
      burstCtx.translate(p.x, p.y);
      burstCtx.rotate(p.rot + p.life * p.drot);
      burstCtx.fillStyle = p.col;
      burstCtx.fillRect(-p.s/2, -p.s/6, p.s, p.s/3);
      burstCtx.restore();
    } else {
      burstCtx.beginPath();
      burstCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      burstCtx.fillStyle = p.col;
      burstCtx.fill();
    }
    if(p.life > p.ttl) particles.splice(i,1);
  }

  // glitter rain
  glitterCtx.clearRect(0,0,glitterCanvas.width, glitterCanvas.height);
  for(let i=glitter.length-1;i>=0;i--){
    const g = glitter[i];
    g.x += g.vx * (dt/16);
    g.y += g.vy * (dt/16);
    glitterCtx.beginPath();
    glitterCtx.arc(g.x, g.y, g.r, 0, Math.PI*2);
    glitterCtx.fillStyle = g.col; glitterCtx.fill();
    if(g.y > window.innerHeight + 30) glitter.splice(i,1);
  }

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);

/* ============================
   Balloon pop sequence
   ============================ */
const balloon = document.getElementById('balloon');
const btn = document.getElementById('btn');
const polaroids = Array.from(document.querySelectorAll('.polaroid'));
const wishEl = document.getElementById('wish');
const flash = document.getElementById('flash');
const smoke = document.getElementById('smoke');
const bgm = document.getElementById('bgm');

let done=false;

/* soft audio fade-in function */
async function fadeInAudio(audioElem, duration = 1600){
  try{
    audioElem.volume = 0;
    await audioElem.play();
    const steps = 30;
    const stepTime = duration / steps;
    for(let i=1;i<=steps;i++){
      audioElem.volume = clamp(i/steps, 0, 1);
      await new Promise(r=>setTimeout(r, stepTime));
    }
    audioElem.volume = 1;
  }catch(e){
    // autoplay blocked â€” will try on user interaction
  }
}

/* synth pop sound with WebAudio for crisp pop */
function playPopSound(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator(); const g = ctx.createGain();
    o.type = 'triangle';
    o.frequency.setValueAtTime(600, ctx.currentTime);
    o.frequency.exponentialRampToValueAtTime(120, ctx.currentTime + 0.12);
    g.gain.setValueAtTime(0.001, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.12, ctx.currentTime + 0.01);
    g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.18);
    o.connect(g); g.connect(ctx.destination);
    o.start(); o.stop(ctx.currentTime + 0.2);
  }catch(e){}
}

/* typewriter with glowing gradient */
function typeWriterGlow(text, el){
  el.innerHTML = '';
  el.style.opacity = 1;
  let i = 0;
  function step(){
    if(i < text.length){
      el.innerHTML += text.charAt(i);
      i++;
      // gentle glow pulse
      el.style.textShadow = `0 ${6 + Math.sin(i/3)*4}px ${20 + Math.sin(i/4)*10}px rgba(255,140,190,0.12)`;
      setTimeout(step, 28 + Math.random()*30);
    } else {
      el.style.textShadow = `0 10px 28px rgba(255,140,190,0.14)`;
    }
  }
  step();
}

/* animate polaroids: bounce in + float */
function revealPolaroids(){
  polaroids.forEach((p, idx) => {
    const delay = idx * 420;
    setTimeout(()=>{
      p.style.transition = 'transform .7s cubic-bezier(.2,.9,.3,1), opacity .6s ease';
      // small random rotation & final position
      const rot = (Math.random()-0.5) * 10;
      p.style.transform = `translateY(0) scale(1) rotate(${rot}deg)`;
      p.style.opacity = 1;
      // after appear, add gentle float animation using Web Animations API
      p.animate([
        { transform: `translateY(0) rotate(${rot}deg)` },
        { transform: `translateY(-8px) rotate(${rot+2}deg)` },
        { transform: `translateY(0) rotate(${rot}deg)` }
      ], { duration: 1800 + Math.random()*700, iterations: Infinity, delay: 300 + idx*60, easing: 'ease-in-out' });
    }, delay);
  });
}

/* the main pop action */
async function popSequence(){
  if(done) return; done = true;
  btn.setAttribute('aria-pressed','true'); btn.disabled = true;

  // ensure bg music attempts to start and fade in
  fadeInAudio(bgm, 1400);

  // inflate
  balloon.style.transform = 'scale(1.12)';
  balloon.style.transition = 'transform 900ms cubic-bezier(.2,.9,.3,1)';
  // sparkle pulse while inflating (tiny scale pulses)
  balloon.animate([{ transform: 'scale(1.05)' }, { transform: 'scale(1.12)' }], { duration: 900, easing: 'ease-out' });

  // slightly lift
  setTimeout(()=> balloon.style.transform = 'scale(1.22) translateY(-6px)', 820);

  // burst after short delay
  setTimeout(()=> {
    // play pop sound
    playPopSound();

    // flash + smoke
    flash.style.opacity = 1;
    setTimeout(()=> flash.style.opacity = 0, 180);
    smoke.style.opacity = 1;
    smoke.style.transform = 'translateX(-50%) scale(1.12)';
    setTimeout(()=> smoke.style.opacity = 0, 1200);

    // hide balloon with small scale explosion
    balloon.animate([{ transform: 'scale(1.4) translateY(-10px)', opacity: 1 }, { transform: 'scale(0.1) translateY(10px)', opacity: 0 }], { duration: 260, easing: 'cubic-bezier(.2,.9,.3,1)'});
    setTimeout(()=> balloon.style.transform = 'scale(0)', 260);

    // spawn particle burst at center of balloon
    const bRect = balloon.getBoundingClientRect();
    const cx = bRect.left + bRect.width/2;
    const cy = bRect.top + bRect.height/2;
    particles.push(...makeParticles(cx, cy));
    // glitter rain
    spawnGlitter(140);

    // show polaroids staggered w/ bounce
    setTimeout(()=> revealPolaroids(), 280);

    // wish with typewriter glow after images revealed
    const wishText = "ðŸ’Œ Dear Nyeila â€” may your day be full of giggles, sprinkles, and endless sweetness. Happy Birthday! ðŸŽ‚âœ¨";
    setTimeout(()=> typeWriterGlow(wishText, wishEl), 380 + polaroids.length * 420);

  }, 1400);
}

/* try autoplay on load (may be blocked) */
window.addEventListener('load', ()=>{ // polite try
  try{ bgm.volume = 0; bgm.play().then(()=>{ /* don't raise volume until interaction or pop */ }).catch(()=>{}); }catch(e){}
});

/* user interactions */
document.getElementById('btn').addEventListener('click', ()=> popSequence());
window.addEventListener('pointerdown', ()=> { if(bgm.paused){ bgm.play().catch(()=>{}); } }, { once: true });

/* helper: makeParticles used by burst (shared) */
function makeParticles(x,y){
  return (function(){ const p = []; const palette = ['#ffb6d9','#ffd1e8','#a48bff','#c8d4ff','#74e3c5','#ffd166'];
    for(let i=0;i<42;i++){
      const ang = rand(0,Math.PI*2); const sp = rand(2.0,7.2); const s = rand(3,8);
      p.push({ x, y, vx: Math.cos(ang)*sp, vy: Math.sin(ang)*sp - rand(1.2,4.2), s, life:0, ttl:60+Math.random()*60, type:'spark', col: palette[Math.floor(Math.random()*palette.length)], rot:Math.random()*Math.PI*2, drot:(Math.random()-0.5)*0.25 });
    }
    for(let i=0;i<64;i++){
      const ang = rand(0,Math.PI*2); const sp = rand(0.6,4.6); const r = rand(2.2,6.4);
      p.push({ x, y, vx: Math.cos(ang)*sp, vy: Math.sin(ang)*sp - rand(0.6,2.5), r, life:0, ttl:90+Math.random()*110, type:'dot', col: ['#ffb6d9','#ffd1e8','#a48bff','#c8d4ff','#74e3c5','#ffd166'][Math.floor(Math.random()*6)] });
    }
    return p;
  })();
}

/* Clean up huge arrays occasionally */
setInterval(()=>{ if(particles.length>2000) particles.splice(0, particles.length-1500); if(glitter.length>2000) glitter.splice(0, glitter.length-1500); }, 4000);

/* ensure body click will start music if blocked */
document.body.addEventListener('click', ()=> {
  if(bgm.paused) fadeInAudio(bgm, 800);
}, {passive:true});

</script>
</body>
</html>
